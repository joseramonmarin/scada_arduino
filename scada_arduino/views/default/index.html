<html>
	<head>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   id="Layer_1"
   x="0px"
   y="0px"
   width="500px"
   height="500px"
   viewBox="0 0 100 100"
   style="enable-background:new 0 0 100 100;"
   xml:space="preserve"
   inkscape:version="0.48.4 r9939"
   sodipodi:docname="casa.svg"><metadata
     id="metadata3039"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><defs
     id="defs3037" /><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1366"
     inkscape:window-height="718"
     id="namedview3035"
     showgrid="false"
     inkscape:zoom="5.4"
     inkscape:cx="50"
     inkscape:cy="50"
     inkscape:window-x="0"
     inkscape:window-y="0"
     inkscape:window-maximized="1"
     inkscape:current-layer="Layer_1" /><path
     style="fill:#000000"
     d="M 50,0 0,50 h 12.5 v 50 h 75 V 50 H 100 L 50,0 z M 75,87.5 H 56.25 V 68.75 H 43.75 V 87.5 H 25 V 42.676 L 50,25 75,42.676 V 87.5 z"
     id="casa"
     inkscape:connector-curvature="0" /><path
     inkscape:connector-curvature="0"
     d="m 50.648148,29.364852 c -2.927324,0 -5.300815,2.904861 -5.300815,6.488063 0,1.179796 0.270856,2.276595 0.706687,3.239395 1.301812,2.87055 1.646537,4.482481 1.858865,6.042482 0.178234,1.307767 0.424846,1.611467 1.231919,1.611467 0.343211,0 0.905189,0 1.503344,0 0.598155,0 1.160133,0 1.503154,0 0.807453,0 1.053874,-0.304164 1.232109,-1.611467 0.212328,-1.560001 0.557243,-3.172164 1.859054,-6.042482 0.436021,-0.962568 0.706498,-2.059599 0.706498,-3.239395 1.89e-4,-3.583202 -2.373302,-6.488063 -5.300815,-6.488063 z"
     id="bombilla" /><path
     inkscape:connector-curvature="0"
     d="m 52.838165,48.740741 h -4.380032 c -0.181334,0 -0.328503,-0.260944 -0.328503,-0.583333 v -0.388889 c 0,-0.322389 0.147169,-0.583334 0.328503,-0.583334 h 4.380032 c 0.181333,0 0.328502,0.260945 0.328502,0.583334 v 0.388889 c 0,0.322389 -0.147169,0.583333 -0.328502,0.583333 z"
     id="casquillo1" /><path
     inkscape:connector-curvature="0"
     d="M 52.745572,50.592593 H 48.36554 c -0.181334,0 -0.328503,-0.260944 -0.328503,-0.583333 v -0.388889 c 0,-0.322389 0.147169,-0.583334 0.328503,-0.583334 h 4.380032 c 0.181333,0 0.328502,0.260945 0.328502,0.583334 v 0.388889 c 0,0.322389 -0.147169,0.583333 -0.328502,0.583333 z"
     id="casquillo2" /><path
     inkscape:connector-curvature="0"
     d="m 52.745573,52.444445 h -4.380032 c -0.181334,0 -0.328503,-0.260944 -0.328503,-0.583333 v -0.388889 c 0,-0.322389 0.147169,-0.583334 0.328503,-0.583334 h 4.380032 c 0.181333,0 0.328502,0.260945 0.328502,0.583334 v 0.388889 c 0,0.322389 -0.147169,0.583333 -0.328502,0.583333 z"
     id="casquillo3" /><path
     inkscape:connector-curvature="0"
     d="m 48.425926,52.87037 h 4.259259 c 0,0.777778 -1.135802,1.296296 -2.129629,1.296296 -0.993828,0 -2.12963,-0.518518 -2.12963,-1.296296 z"
     id="casquillo4" /><path
     style="fill:#aa4400"
     d="m 44.074074,78.055556 0,-8.796297 5.833333,0 5.833334,0 0,8.796297 0,8.796296 -5.833334,0 -5.833333,0 0,-8.796296 z"
     id="puerta"
     inkscape:connector-curvature="0" /><rect
     style="fill:#ff0000"
     id="fijo"
     width="4.4444447"
     height="25"
     x="33.148151"
     y="45.185184" /><rect
     style="fill:#f2f2f2"
     id="variable"
     width="4.4444447"
     height="25"
     x="33.148148"
     y="45.185184" /><path
     sodipodi:type="arc"
     style="fill:#ff0000"
     id="path3014"
     sodipodi:cx="34.444443"
     sodipodi:cy="77.870369"
     sodipodi:rx="3.1481481"
     sodipodi:ry="3.2407408"
     d="m 37.592591,77.870369 a 3.1481481,3.2407408 0 1 1 -6.296296,0 3.1481481,3.2407408 0 1 1 6.296296,0 z"
     transform="translate(0.74074074,-5.9259259)" /></svg>
</head>
<body>
	<button id="encender">On</button>
	<button id="apagar">Off</button>
	
	<script src={{=URL('static','js/raphael-min.js')}}></script>
	<script src={{=URL('static','js/jquery.js')}}></script>
  <script>
var resultado={};
var datos={};
jQuery("#variable").attr('height',10);

 
 
 
 
      
jQuery(document).ready(function() {
      temporizador=window.setInterval(enviodatos, 100);
      jQuery("#encender").click(function() {
		  
         jQuery("#bombilla").attr("style","fill:yellow");
      datos={'valor': 1};
			estado=1;
          
      });
      jQuery("#apagar").click(function() {
		  
         jQuery("#bombilla").attr("style","fill:black");
      datos={'valor': 0};
      estado=1;
          
      });
     
      
      function enviodatos(){
      
      
      jQuery.post("{{=URL('default','recibe_datos.json')}}",datos, {contentType: 'application/json'} )
              .success(function(resultado)
              
             { 
              window.console.log(resultado);
              jQuery("#variable").attr("height",resultado["Termometro"]);
               if(resultado["Puerta"]=='1') {
         jQuery("#puerta").attr("style","fill:white");
         
			
      }
		if(resultado["Puerta"]=='0') {
         jQuery("#puerta").attr("style","fill:#aa4400");
         
         
      }
 });
     

 
}
  estado=0;    
  });

	
	</script>
</body>

</html>


